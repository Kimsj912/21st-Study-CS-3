# 2.4 안전하지 않은 문자

## 1. 개요

- `안전한 전송`: 정보가 유실딜 위험없이 URL을 전송할 수 있다는 것을 의미
- URL 설계자들은 모든 인터넷 프로토콜로 URL이 전송될 수 있기를 바랐고 가독성 있기를 바랐음
- URL 설계자들은 사람들이 URL에 이진 데이터나 일반적으로 안전한 알파벳 외의 문자도 포함하려고 할 때가 있다는 것을 알았고 `이스케이프` 라는 기능을 추가하여 안전하지 않은 문자를 안전한 문자로 인코딩 할 수 있게 함

## 2. URL 문자 집합(2.4.1)

- `US-ASCII`
  - 문자를 서식화하고 하드웨어상에서 신호를 주고받기 위해 7비트를 사용하여 영문 자판에 있는 키 대부분과 몇몇 출력되지 않는 제어 문자를 표현
  - 컴퓨터 시스템의 기본 문자 집합은 보통 영어 중심으로 설정되어 있고 역사적으로 많은 컴퓨터 애플리케이션이 사용해옴
  - 만들어진지 오래된 문자 집합이기 때문에 적은 수의 문자만을 포함하고 있음
  - 유럽 언어나 수백가지의 비 라틴계 언어들에 존재하는 변형된 문자들까지 지원하지 않음
- `이스케이프 문자열`
  - US-ASCII 에서 사용이 금지된 문자들
  - `특정 문자나 데이터를 인코딩할 수 있게 함`으로써 이동성과 완성도를 높임
  - URL은 특정 이진 데이터를 포함해야 하는 경우도 있는데, 이를 지원하기 위해 URL 설계자들이 URL에 이스케이프 문자열을 쓸 수 있게 설계

## 3. 인코딩 체계(2.4.2)

- 인코딩
  - 안전하지 않은 문자를 `퍼센티지 기호(%)`로 시작해 `ASCII코드로 표현되는 두개의 16진수 숫자로 이루어진 ‘이스케이프’ 문자`로 바꿈
  - URL에 있는 안전하지 않은 문자들을 표현할 수 있는 인코딩 방식 고안
- 예시

|문자|ASCII코드|URL의 예|
|------|---|---|
|~|126(0x`7E`)|http://www.joes-hardware.com/`%7E`joe|
|빈문자|32(0x`20`)|http://www.joes-hardware.com/more`%20`tools.html|
|%|37(0x`25`)|http://www.joes-hardware.com/100`%25`satisfaction.html|

## 4. 문자 제한(2.4.3)

- 몇몇 문자는 URL내에서 특별한 의미로 예약되어 있고 어떤 문자는 US-ASCII의 출력 가능한 문자 집합에 포함되어 있으며 어떤 문자는 몇몇 인터넷 게이트웨이와 프로토콜에서 혼동되는 것으로 알려져 사용이 꺼려짐
- 아래는 `URL에서 예약된 문자들을 본래의 목적이 아닌 다른 용도로 사용하려면 그전에 반드시 인코딩해야 하는 문자`들

| 문자 | 선점 및 제한 |
|------|---|
| % | 인코딩된 문자에 사용할 이스케이프 토큰으로 선점 |
| / | 경로 컴포넌트에 있는 경로 세그먼트를 나누는 용도로 선점 |
| . | 경로 컴포넌트에서 선점 |
| .. | 경로 컴포넌트에서 선점 |
| # | 프래그먼트의 구획 문자로 선점 |
| ? | 질의 문자열의 구획 문자로 선점 |
| ; | 파라미터의 구획 문자로 선점 |
| : | 스킴, 사용자 이름/비밀번호, 호스트/포트의 구획 문자로 선점 |
| $ , + | 선점 |
| @ & = | 특정 스킴에서 특별한 의미가 있기 때문에 선점 |
| { } ㅣ \ • ~ [ ] ` | 게이트웨이와 같은 여러 전송 에이전트에서 불안전하게 다루기 때문에 제한됨 |
| < > “ | 안전하지 않음. 웹 문서에서 URL을 구분지어 표시하듯이 URL 범위밖에서 역할이 있는 문자이기 때문에 반드시 인코딩 해야 함 |
| 0x00-0x1F , 0x7F | 제한됨. 이 16진수 범위에 속하는 문자들은 인쇄되지 않는 US-ASCII 문자 |
| > 0x7F | 제한됨. 이 16진수 범위에 속하는 문자들을 7비트 US-ASCII 문자가 아님 |

<br/>
<br/>

### Q1. “http://www.yapp-choigo.com/%7Eseyoung”가 인코딩되기 전에는 어땠을까?

<br/>
<br/>

## 참고자료

- HTTP 완벽 가이드 (책)

Q1. http://www.yapp-choigo.com/~seyoung
