# 3.3 메서드

## 1. 개요

- `모든 서버가 모든 메서드를 구현하지는 않는다`
  - EX) HTTP 1.1 → GET과 HEAD 메서드만을 구현하라고 요구

## 2. 안전한 메서드(Safe Method)(3.3.1)

- HTTP는 `안전한 메서드`라 불리는 메서드의 집합을 정의한다
- `작용이 없다` → HTTP 요청의 결과로 인해 `서버에서 일어나는 일은 아무것도 없다`는 의미
- 안전한 메서드가 서버에 작용을 유발하지 않는다는 보장은 없다
  - 안전한 메서드의 목적은 서버에서 어떤 영향을 줄 수 있는 안전하지 않은 메서드가 사용될 때 사용자들에게 그 사실을 알려주는 HTTP 애플리케이션을 만들 수 있도록 하는 것에 있다

## 3. 메서드의 종류

- `GET`
  - 주로 서버에게 리소스를 달라고 요청하기 위해 쓰인다
  - `HTTP/1.1`은 서버가 이 메서드를 구현할 것을 요구
- `HEAD`

  - 정확히 GET처럼 행동하지만 `서버가 응답으로 헤더만을 돌려준다`(본문은 결코 반환X)
  - HEAD 사용을 통해 얻을 수 있는 것

    1. 리소스를 가져오지 않고도 그에 대해 `무엇인가(타입 등)를 알아낼 수 있다`

    2. 응답의 상태 코드를 통해 `개체가 존재하는지` 확인할 수 있다

    3. 헤더를 확인하여 `리소스가 변경되었는지` 검사할 수 있다

  - 서버개발자들은 반드시 반환되는 헤더가 GET으로 얻는 것과 정확히 일치함을 보장해야 한다
  - `HTTP/1.1` 준수를 위해 반드시 구현되어야 함

- `PUT`
  - 서버에 `문서를 쓴다`
  - 서버가 요청의 본문을 가지고 요청 URL의 이름대로 새 문서를 만들거나 이미 URL이 존재한다면 본문을 사용해서 교체
  - 콘텐츠를 변경할 수 있게 해주기 때문에 많은 웹 서버가 PUT을 수행하기 전에 사용자에게 비밀번호를 입력해서 로그인을 하도록 요구
- `POST`
  - `서버에 입력 데이터를 전송`하기 위해 설계
    - POST: 서버에 데이터를 보내기 위해 사용
    - PUT: 서버에 있는 리소스(예: 파일)에 데이터를 입력하기 위해 사용
  - HTML 폼을 지원하기 위해 흔히 사용
    - 채워진 폼에 담긴 데이터는 서버로 전송됨며 서버는 이를 모아서 필요로 하는 곳에 보냄
- `TRACE`
  - 클라이언트에게 `자신의 요청이 서버에 도달했을 때 어떻게 보이게 되는지` 알려준다
  - 목적지 서버에서 `루프백(LOOPBACK)진단`을 시작
  - 요청 전송의 마지막 단계에 있는 서버는 자신이 받은 요청 메시지를 본문에 넣어 응답을 되돌려준다
  - 클라이언트는 자신과 목적지 서버 사이에 있는 모든 HTTP 애플리케이션의 요청/응답 연쇄를 따라가면서 자신이 `보낸 메시지가 망가졌거나 수정되었는지 만약 그렇다면 어떻게 변경되었는지 확인`할 수 있다
  - 진단을 위해 사용할 때는 괜찮지만, 그 대신 중간 애플리케이션이 여러 다른 종류의 요청들을 일관되게 다룬다고 가정하는 문제
    - 많은 HTTP 애플리케이션은 메서드에 따라 다르게 동작하는데 가령 프락시는 POST 요청을 바로 서버로 통과시키지만 GET 요청은 웹 캐시와 같은 다른 HTTP 애플리케이션으로 전송
  - 어떠한 엔터티 본문도 보낼 수 없으며 `응답의 엔터티 본문에는 서버가 받은 요청이 그대로` 들어있다
- `OPTIONS`
  - 웹 서버에게 여러가지 종류의 지원 범위에 대해 물어본다(서버에게 `특정 리소스에 대해 어떤 메서드가 지원되는지`)
  - 여러 리소스에 실제로 접근하지 않고도 그것들을 어떻게 접근하면 최선인지 확인 가능
- `DELETE`
  - 서버에게 `요청 URL로 지정한 리소스를 삭제`할 것을 요청
  - 삭제가 수행되는 것을 보장하지는 못한다 → HTTP 명세는 서버가 클라이언트에게 알리지 않고 요청을 무시하는 것을 허용하기 때문

## 4. 확장 메서드(3.3.9)

- HTTP/1.1 명세에 정의되지 않은 메서드
- HTTP 서비스의 서버가 관리하는 리소스에 대한 능력을 확장하는 수단을 제공
- 확장 메서드의 대표적인 예
  - `LOCK`: 사용자가 리소스를 잠글 수 있게 해준다. 예를 들어 문서를 편집하는 동안 다른 사람이 동시에 같은 문서를 편집하지 못하도록 문서를 잠글 수 있다
  - `MKCOL`: 사용자가 문서를 생성할 수 있게 해준다
  - `COPY`: 서버에 있는 리소스를 복사한다
  - `MOVE`: 서버에 있는 리소스를 옮긴다
- 프락시는 종단 간(END-TO-END) 행위를 망가뜨리지 않을 수 있다면 알려지지 않은 메서드가 담긴 메세지를 다운스트림 서버로 전달하려고 시도
  - 그렇지 않다면 501 상태 코드로 응답해야 함
- 확장 메서드를 다룰 때는 “엄격하게 보내고 관대하게 받아들여라”라는 오랜 규칙에 따르는 것이 가장 좋다

<br/>

<br/>

### Q1. HTTP/1.1에서 요구되는 메서드는?

<br/>

### Q2. POST 와 PUT의 차이

<br/>
<br/>
<br/>
Q1. GET, HEAD

Q2. 위의 내용 참고
