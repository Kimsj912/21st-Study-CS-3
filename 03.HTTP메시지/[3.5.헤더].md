# 3.5 헤더

헤더와 메서드는 **클라이언트와 서버가 무엇을 하는지 결정하기 위해** 함께 사용된다. 그리고 오늘 배울 헤더에는 특정 종류의 메시지만 사용할 수 있는 헤더, 일반 목적으로 사용되는 일반 헤더, 그리고 응답과 요청 메시지 양쪽 모두에서 정보를 제공하는 헤더들이 있다. 헤더는 크게 다섯 가지로 분류가 된다.

<br />
<br />

## 3.5.1 일반 헤더

일반 헤더는 HTTP 메시지에 대한 아주 기본적인 정보만을 제공하는 헤더다. 이 헤더는 클라이언트와 서버 양쪽 모두가 사용하며, 메시지가 어떤 종류이든 상관없이 유용한 정보를 제공한다. 이러한 특징을 통해 다양한 목적으로 사용된다.

|헤더|설명|
|---|---|
|Connection|클라이언트와 서버가 요청/응답 연결에 대한 옵션을 정할 수 있게 해준다.|
|Date|메시지가 언제 만들어졌는지에 대한 날짜와 시간을 제공한다.|
|Transfer-Encoding|수신자에게 안전한 전송을 위해 메시지에 어떤 인코딩이 적용되었는지 말해준다.|
|Via|이 메시지가 어떤 중개자(프락시, 게이트웨이)를 거쳐 왔는지 보여준다.|

<br />

#### 일반 캐시 헤더

HTTP/1.0은 HTTP 애플리케이션에게 **매번 원 서버로부터 객체를 가져오는 대신 로컬 복사본으로 캐시할 수 있도록 해주는 최초의 헤더를 도입했다.**

|헤더|설명|
|---|---|
|Cache-Control|메시지와 함께 캐시 지시자를 전달하기 위해 사용한다.|
|Pragma|메시지와 함께 지시자를 전달하는 또 다른 방법. 캐시에 국한되지 않는다.|

Pragma는 엄밀히 말하면 요청 헤더이며, 응답에 사용하기 위해 정의되지 않았다. 현재 Pragma는 Cache-Control로 인해 더 이상 사용되지 않을 예정이다.

<br />
<br />

## 3.5.2 요청 헤더

요청 헤더는 요청 메시지에서만 의미를 갖는 헤더이다. 요청이 최초로 발생한 곳에서 누가 어떤 요청을 보냈는지에 대한 정보를 담고 있다. 이러한 특징을 통해 서버는 요청 헤더가 준 클라이언트에 대한 정보를 활용해 더 나은 정보를 줄 수 있다.

|헤더|설명|
|---|---|
|Client-IP|클라이언트가 실행된 컴퓨터의 IP를 제공한다.|
|Referer|현재의 요청 URI가 들어있었던 문서의 URL을 제공한다.|
|User-Agent|요청을 보낸 애플리케이션의 이름을 서버에게 말해준다.|

<br />

#### Accept 관련 헤더

클라이언트는 Accept 관련 헤더들을 이용해 **서버에게 자신의 선호와 능력을 알려줄 수 있다.** 클라이언트 자신이 무엇을 원하고, 무엇을 원하지 않는지까지 알려줄 수 있다. 

|헤더|설명|
|---|---|
|Accept|서버에게 서버가 보내도 되는 **미디어 종류**를 말해준다.|
|Accept-Encoding|서버에게 서버가 보내도 되는 **인코딩**을 말해준다.|
|Accept-Language|서버에게 서버가 보내도 되는 **언어**을 말해준다.|
|TE (Transfer-Encoding)|서버에게 서버가 보내도 되는 **확장 전송 코딩**을 말해준다.|

<br />

#### 조건부 요청 헤더

때때로, 클라이언트는 요청에 몇몇 제약을 넣기도 한다. 예를 들어 클라이언트가 어떤 문서에 대한 사본을 갖고 있는 상태라면 문서와 사본의 정보가 다를 때만 전송하고 싶을 수 있을 것이다. 이런 경우에 조건부 요청 헤더를 사용하면, 서버에게 요청하기 전에 조건이 참인지 검사를 하게 된다.

|헤더|설명|
|---|---|
|Expect|클라이언트가 요청에 필요한 서버의 행동을 열거할 수 있게 해준다.|
|if-Match|문서의 엔터티 태그가 주어진 엔터티 태그와 일치하는 경우에만 문서를 가져온다.|
|if-Modified-Since|주어진 날짜 이후에 리소스가 변경되지 않았다면 요청을 제한한다.|
|if-None-Match|문서의 엔터티 태그가 주어진 엔터티 태그와 일치하지 않는 경우에만 문서를 가져온다.|
|if-Range|문서의 특정 범위에 대한 요청을 할 수 있게 해준다.|
|if-Unmodified-Since|주어진 날짜 이후에 리소스가 변경되었다면 요청을 제한한다.|
|Range|서버가 범위 요청을 지원한다면, 리소스에 대한 특정 범위를 요청한다.|

<br />

#### 요청 보안 헤더

HTTP는 자체적으로 요청을 위한 간단한 인증요구/응답 체계를 갖고 있다. 특정 리소스에 접근하기 전에 **자신을 인증하게 함으로써 트랜잭션을 약간 더 안전하게 만들고자 한다.**

|헤더|설명|
|---|---|
|Authorization|클라이언트가 서버에게 제공하는 인증 그 자체에 대한 정보를 담고 있다.|
|Cookie|클라이언트가 서버에게 **토큰을 전달할 때 사용한다.** 진짜 보안 헤더는 아니지만, 보안에 영향을 줄 수 있다. (Cookie 헤더는 RFC 2616에 정의되어 있지 않다.)|
|Cookie2|요청자가 지원하는 쿠키의 버전을 알려줄 때 사용한다.|

<br />

#### 프락시 요청 헤더

|헤더|설명|
|---|---|
|Max-Forwards|요청이 원 서버로 향하는 과정에서 다른 프락시나 게이트웨이로 전달될 수 있는 최대 횟수. TRACE 메서드와 함께 사용된다.|
|Proxy-Authorization|Authorization과 같으나 프락시에서 인증을 할 때 쓰인다.|
|Proxy-Connection|Connection과 같으나 프락시에서 연결을 맺을 때 쓰인다.|

<br />
<br />

## 3.5.3 응답 헤더

응답 헤더는 메시지를 응답 받을 때에만 의미를 갖는다. 응답 헤더는 클라이언트에게 부가 정보를 제공할 수 있으며, 현재 서버는 누구인지 어떤 능력을 가지고 있는지 알려준다. 그리고 클라이언트가 이후에 더 나은 요청을 할 수 있도록 도와준다.

|헤더|설명|
|---|---|
|Age|응답이 얼마나 오래되었는지|
|Retry-After|현재 리소스가 사용 불가능한 상태일 때, 언제 가능해지는지 날짜 혹은 시각|
|Server|서버 애플리케이션의 이름과 버전|
|Title|HTML 문서에서 주어진 것과 같은 제목|

<br />

#### 협상 헤더

서버에 프랑스어와 독일어로 번역된 HTML 문서가 있는 경우와 같이 여러 가지 표현이 가능한 상황이라면, HTTP/1.1은 서버와 클라이언트가 어떤 표현을 택할 것인가에 대한 협상을 할 수 있도록 지원한다.

|헤더|설명|
|---|---|
|Accept-Ranges|서버가 자원에 대해 받아들일 수 있는 범위의 형태|
|Vary|서버가 확인해 보아야 하고 그렇기 때문에 **응답에 영향을 줄 수 있는 헤더들의 목록**. 서버가 클라이언트에게 보내줄 리소스의 가장 적절한 버전을 선택하기 위해 살펴 보아야 하는 헤더들의 목록.|

<br />

#### 응답 보안 헤더

|헤더|설명|
|---|---|
|Proxy-Authenticate|프락시에서 클라이언트로 보낸 인증요구의 목록|
|Set-Cookie|서버가 클라이언트를 인증할 수 있도록 클라이언트 측에 토큰을 설정하기 위해 사용한다.|
|Set-Cookie2|Set-Cookie와 비슷하게 RFC 2965로 정의된 쿠키|
|WWW-Authenticate|서버에서 클라이언트로 보낸 인증요구의 목록|

<br />
<br />

## 3.5.4 엔터티 헤더

엔터티 헤더란 엔터티 본문에 대한 헤더를 말한다. 즉, 본문에 들어있는 정보들을 엔터티 헤더를 통해 알려준다. 엔터티 헤더는 요청과 응답 양쪽 모두 엔터티를 포함할 수 있기 때문에, 양 타입의 메시지에 모두 나타날 수 있다. 

엔터티 헤더는 엔터티 본문의 정보에 대해 개체의 타입부터 주어진 리소스에 대해 요청할 수 있는 유효한 메서드들 까지 광범위한 정보를 제공한다. 일반적으로 엔터티 헤더는 메시지의 수신자에게 자신이 다루고 있는 것이 무엇인지 말해준다.

|헤더|설명|
|---|---|
|Allow|이 엔터티에 대해 수행될 수 있는 요청 메서드들을 나열한다.|
|Location|클라이언트에게 엔터티가 실제로 어디에 위치하고 있는지 말해준다. 수신자에게 리소스에 대한 위치를 알려줄 때도 사용한다.|

<br />

#### 콘텐츠 헤더

콘텐츠 헤더는 **엔터티의 콘텐츠에 대한 구체적인 정보를 제공한다.** 이를 통해 웹 브라우저는 사용자에게 콘텐츠를 어떻게 보여줄지 결정한다.

|헤더|설명|
|---|---|
|Content-Base|본문에서 사용된 상대 URL을 계산하기 위한 기저 URL (RFC 2616에 정의되어 있지 않다.)|
|Content-Language|본문을 이해하는데 가장 적절한 자연어|
|Content-Location|리소스가 실제로 어디에 위치하는지|
|Content-MD5|본문의 MD5 체크섬(checksum)|
|Content-Range|전체 리소스에서 이 엔터티가 해당하는 범위를 **바이트 단위**로 표현|
|Content-Type|이 본문이 어떤 종류의 객체인지|

<br />

#### 엔터티 캐싱 헤더

일반 캐싱 헤더는 언제 어떻게 캐시가 되어야 하는지에 대한 정보를 제공한다. 엔터티 캐싱 헤더는 **엔터티 캐싱에 대한 정보를 제공한다.** 예를 들면, 리소스에 대해 캐시된 사본이 아직 유효한지에 대한 정보와, 캐시된 리소스가 더 이상 유효하지 않게 되는 시점을 더 잘 추정하기 위한 단서 같은 것이다.

|헤더|설명|
|---|---|
|ETag|이 엔터티에 대한 엔터티 태그. 엔터티 태그는 기본적으로 리소스의 특정 버전에 대한 식별자다.|
|Expires|이 엔터티가 더 이상 유효하지 않아 원본을 다시 받아와야 하는 일시|
|Last-Modified|가장 최근 이 엔터티가 변경된 일시|


