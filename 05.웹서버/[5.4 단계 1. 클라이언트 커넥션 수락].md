- 클라이언트가 이미 서버에 대해 열려있는 지속적 커넥션을 갖고 있을 경우: 클라이언트는 요청을 보내기 위해 그 커넥션을 사용할 수 있다
- 그렇지 않을 경우: 클라이언트는 `서버에 대한 새 커넥션을 열 필요가 있다`

## 1. 새 커넥션 다루기(5.4.1)

- 클라이언트가 웹 서버에 TCP 커넥션을 요청하면 웹 서버는 그 커넥션을 맺고 `TCP 커넥션에서 IP 주소를 추출`하여 커넥션 맞은편에 `어떤 클라이언트가 있는지 확인`
- 새 커넥션이 맺어지고 받아들여지면 `서버는 새 커넥션을 커넥션 목록에 추가`하고 커넥션에서 오가는 데이터를 지켜보기 위한 준비
- 웹 서버는 어떤 커넥션이든 마음대로 거절하거나 즉시 닫을 수 있음
  - 클라이언트의 IP주소나 호스트명이 인가되지 않았거나 악의적이라고 알려진 것인 경우 닫음

## 2. 클라이언트 호스트 명 식별(5.4.2)

- 대부분의 웹 서버는 `역방향 DNS`를 사용해서 클라이언트의 IP 주소를 클라이언트의 호스트 명으로 변환하도록 설정되어 있음
- 웹 서버는 클라이언트 호스트명을 `구체적인 접근 제어`와 `로깅`을 위해 사용할 수 있음
- 호스트 명 룩업(IP 로 Domain Name 을 찾는 기능**)**은 시간이 많이 걸릴 수 있어 `웹 트랜잭션을 느려지게 할 수 있음`
  - 많은 대용량 웹 서버는 호스트 명 분석을 꺼두거나 특정 콘텐츠에 대해서만 켜둠

## 3. ident를 통해 클라이언트 사용자 알아내기(5.4.3)

- 몇몇 웹 서버는 `IETF ident 프로토콜` 지원
- `ident 프로토콜`: 서버에게 `어떤 사용자 이름이 HTTP 커넥션을 초기화했는지` 찾아낼 수 있게 해줌
  - 이 정보는 특히 웹 서버 로깅에서 유용
  - 널리 쓰이는 일반 로그 포맷의 두번째 필드가 각 HTTP 요청의 ident 사용자 이름을 담고 있다
- 어떻게 ident 프로토콜이 동작하는지 보여주는 예시

![출처: HTTP 완벽 가이드](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/d56f7bdf-7417-410f-990f-5e5cf8a8ba31/5%EC%9E%A5.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221214%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221214T061000Z&X-Amz-Expires=86400&X-Amz-Signature=6b670b2f4424d9559f11c52c60f3caa1071746975b41165db8912b17d135a650&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%225%25EC%259E%25A5.jpg%22&x-id=GetObject)

- ident가 공공 인터넷에서 잘 동작하지 않는 이유
  - 많은 클라이언트 PC는 identd 신원확인 프로토콜 데몬 소프트웨어를 실행하지 않음
  - ident 프로토콜은 `HTTP 트랜잭션을 유의미하게 지연`
  - `방화벽이 막는 경우`가 많음
  - 안전하지 않고 조작하기 쉬움
  - 가상 IP 주소를 잘 지원하지 않음
  - 클라이언트 사용자 이름의 노출로 인한 `프라이버시 침해의 우려`
