# 1.6 TCP 커넥션

## 1. TCP/IP

- HTTP 는 [애플리케이션 계층](https://the-brain-of-sic2.tistory.com/49) 프로토콜로, 네트워크 통신의 핵심적인 세부사항에 대해서는 신경쓰지 않음
  → 대신 대중적이고 신뢰성 있는 인터넷 전송 프로토콜인 TCP/IP 에 맡긴다
- TCP가 제공하는 것
  - 오류 없는 데이터 전송
  - 순서에 맞는 전달 (데이터는 언제나 보낸 순서대로 도착한다)
  - 조각나지 않는 데이터 스트림 (언제든 어떤 크기로든 보낼 수 있다
- `TCP/IP`
  - TCP와 IP가 층을 이루는, 패킷 교환 네트워크 프로토콜의 집합
    - TCP 프로토콜과 IP 프로토콜을 아울러 지칭하는 용어
    - `TCP 프로토콜`은 신뢰성 있고 무결성을 보장하는 연결을 통해 데이터를 안전하게 전달해주는 전송 프로토콜이고, `IP 프로토콜`은 패킷들을 가장 효율적인 방법으로 최종 목적지로 전송하기 위해 필요한 프로토콜
    - 더 자세한 것은 [이 글](https://velog.io/@haero_kim/%EB%AC%BC-%ED%9D%90%EB%A5%B4%EB%93%AF-%EC%9D%BD%EC%96%B4%EB%B3%B4%EB%8A%94-TCPIP)을 참고
  - 각 네트워크와 하드웨어의 특성을 숨기고, 어떤 종류의 컴퓨터나 네트워크든 서로 신뢰성 있는 의사소통을 하게 해줌
  - TCP 커넥션이 맺어지면, 클라이언트와 서버 컴퓨터 간에 교환되는 메시지가 없어지거나, 손상되거나, 순서가 뒤바뀌어 수신되는 일은 결코 없음

## 2. IP 주소, 포트 번호(1.6.2)

- HTTP 클라이언트가 서버에 메시지를 전송할 수 있게 되기 전에 인터넷 프로토콜(IP) 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 맺어야 함
  - TCP 커넥션을 맺는 것은 다른 회사 사무실에 근무하는 사람에게 전화 거는 것과 비슷
    →회사의 전화번호 누름. 회사 연결되면 전화를 걸고자 하는 상대방의 전봐번호를 누름
- TCP에서는 서버 컴퓨터에 대한 `IP 주소`, `그 서버에서 실행 중인 프로그램이 사용 중인 포트번호`가 필요
- HTTP 서버의 IP주소와 포트번호는 `URL`을 이용하면 된다
  - URL이란 리소스에 대한 주소이기 때문에 그 리소스를 가진 장비에 대한 IP주소 또한 알려줄 수 있다!
- `예시`

  1. http://207.200.83.29:80/index.html

  2. http://www.netscape.com:80/index.html

  3. http://www.netscape.com/index.html

  - 1)의 경우
    - `IP주소`: 207.200.83.29 / `포트번호`: 80
  - 2)의 경우
    - IP 주소 대신 글자로 된 `도메인 이름 혹은 호스트 명`을 가지고 있음
      → www.netscape.com
    - `호스트 명`: IP 주소에 대한 이해하기 쉬운 형태의 별명. 도메인 이름 서비스(DNS)로 쉽게 IP로 변환 가능
    - 포트번호: 80
  - 3)의 경우
    - 역시나 호스트 명
    - 포트번호 없음. HTTP URL에 `포트번호가 빠진 경우에는 기본값 80`이라고 가정

- 웹 브라우저가 HTTP를 이용해 멀리 떨어진 곳에 있는 서버의 단순한 html 리소스를 사용자에게 보여주는 과정
  1. 웹브라우저가 서버의 URL에서 `호스트 명 추출`

  2. 웹브라우저가 서버의 호스트 명을 `IP로 변환`

  3. 웹브라우저가 url에서 `포트번호(있다면)을 추출`

  4. 웹브라우저가 웹 서버와 `TCP 커넥션`을 맺음

  5. 웹브라우저가 서버에 HTTP 요청을 보냄

  6. 서버는 웹브라우저에 HTTP 응답을 돌려줌

  7. 커넥션이 닫히면 웹브라우저는 문서를 보여줌

<br/>
<br/>

### Q1. 127.0.0.1:3000 에서 IP 주소와 포트번호를 구분해보자!

<br/>
<br/>

## 참고자료

- HTTP 완벽 가이드(책)
- [https://the-brain-of-sic2.tistory.com/49](https://the-brain-of-sic2.tistory.com/49)
- [https://velog.io/@haero_kim/물-흐르듯-읽어보는-TCPIP](https://velog.io/@haero_kim/%EB%AC%BC-%ED%9D%90%EB%A5%B4%EB%93%AF-%EC%9D%BD%EC%96%B4%EB%B3%B4%EB%8A%94-TCPIP)

Q1. IP: 127.0.0.1 / 포트번호: 3000
